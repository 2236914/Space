<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="apple-touch-icon" sizes="76x76" href="../assets/img/logo-space.png">
  <link rel="icon" type="image/png" href="../assets/img/logo-space.png">
  <title>Meditation - Space</title>
  <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Inter:300,400,500,600,700,900" />
  <link href="../assets/css/nucleo-icons.css" rel="stylesheet" />
  <link href="../assets/css/nucleo-svg.css" rel="stylesheet" />
  <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" />
  <link id="pagestyle" href="../assets/css/material-dashboard.css" rel="stylesheet" />
  <style>
    .demo-banner {
      background: linear-gradient(90deg, #4CAF50 0%, #2196F3 100%);
      color: white;
      padding: 8px 20px;
      text-align: center;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 9999;
      font-size: 13px;
    }
    .demo-banner a { color: #fff; margin: 0 10px; }
    body.g-sidenav-show { padding-top: 35px; }
    .sidenav { top: 35px !important; }
    .main-content { margin-top: 35px; }
    
    .meditation-card {
      cursor: pointer;
      transition: all 0.3s ease;
      overflow: hidden;
    }
    .meditation-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 35px rgba(0,0,0,0.15);
    }
    .meditation-image {
      height: 120px;
      background-size: cover;
      background-position: center;
      position: relative;
    }
    .meditation-image::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(to bottom, transparent 50%, rgba(0,0,0,0.7));
    }
    .play-btn {
      position: absolute;
      bottom: 10px;
      right: 10px;
      z-index: 2;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: white;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    }
    .timer-display {
      font-size: 72px;
      font-weight: 300;
      color: #344767;
      font-family: 'Inter', sans-serif;
    }
    .breathing-circle {
      width: 200px;
      height: 200px;
      border-radius: 50%;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto;
      transition: transform 4s ease-in-out;
      box-shadow: 0 10px 40px rgba(102, 126, 234, 0.4);
    }
    .breathing-circle.inhale {
      transform: scale(1.3);
    }
    .breathing-circle.exhale {
      transform: scale(1);
    }
    .breathing-text {
      color: white;
      font-size: 24px;
      font-weight: 500;
    }
    .sound-option {
      padding: 15px;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.2s ease;
      text-align: center;
      border: 2px solid transparent;
    }
    .sound-option:hover {
      background: #f8f9fa;
    }
    .sound-option.selected {
      border-color: #667eea;
      background: linear-gradient(135deg, #f3e7ff 0%, #e8f4fd 100%);
    }
  </style>
</head>

<body class="g-sidenav-show bg-gray-100">
  <!-- Demo Banner -->
  <div class="demo-banner">
    üë®‚Äçüéì <strong>STUDENT DEMO - Meditation</strong> | 
    <a href="dashboard.html">Dashboard</a> |
    <a href="selfcare.html">Self-Care Tools</a> |
    <a href="../therapist/dashboard.html">Therapist View</a> |
    <a href="../index.html">Home</a>
  </div>

  <!-- Sidebar -->
  <aside class="sidenav navbar navbar-vertical navbar-expand-xs border-radius-lg fixed-start ms-2 bg-white my-2" id="sidenav-main">
    <div class="sidenav-header">
      <i class="fas fa-times p-3 cursor-pointer text-dark opacity-5 position-absolute end-0 top-0 d-xl-none" aria-hidden="true" id="iconSidenav"></i>
      <a class="navbar-brand px-4 py-3 m-0" href="../index.html">
        <img src="../assets/img/logo-space.png" class="navbar-brand-img" width="26" height="26" alt="main_logo">
        <span class="ms-1 font-weight-bold lead text-dark">SPACE</span>
      </a>
    </div>
    <hr class="horizontal dark mt-0 mb-2">
    <div class="collapse navbar-collapse w-auto h-auto" id="sidenav-collapse-main">
      <ul class="navbar-nav">
        <li class="nav-item mb-2 mt-0">
          <a href="#" class="nav-link text-dark">
            <img src="../assets/img/default-avatar.png" class="avatar" alt="avatar">
            <span class="nav-link-text ms-2 ps-1">Juan Dela Cruz</span>
          </a>
        </li>
        <hr class="horizontal dark mt-0">
        
        <li class="nav-item">
          <a class="nav-link text-dark" href="dashboard.html">
            <i class="material-symbols-rounded opacity-5">dashboard</i>
            <span class="nav-link-text ms-1 ps-1">Dashboard</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-dark" href="moodtracker.html">
            <i class="material-symbols-rounded opacity-5">mood</i>
            <span class="nav-link-text ms-1 ps-1">Mood Tracker</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-dark" href="book-session.html">
            <i class="material-symbols-rounded opacity-5">calendar_month</i>
            <span class="nav-link-text ms-1 ps-1">Book Session</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-dark" href="my-sessions.html">
            <i class="material-symbols-rounded opacity-5">videocam</i>
            <span class="nav-link-text ms-1 ps-1">My Sessions</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-dark" href="community.html">
            <i class="material-symbols-rounded opacity-5">forum</i>
            <span class="nav-link-text ms-1 ps-1">Community</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-dark active" href="selfcare.html">
            <i class="material-symbols-rounded opacity-5">spa</i>
            <span class="nav-link-text ms-1 ps-1">Self-Care Tools</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-dark" href="settings.html">
            <i class="material-symbols-rounded opacity-5">settings</i>
            <span class="nav-link-text ms-1 ps-1">Account Settings</span>
          </a>
        </li>

        <hr class="horizontal dark mt-0">
        <div class="d-flex justify-content-center">
          <button type="button" class="btn bg-gradient-info w-85 mx-auto" onclick="showDemoAlert('Space Support')">
            <i class="material-symbols-rounded opacity-5 me-2">support_agent</i>
            <span class="nav-link-text">Space Support</span>
          </button>
        </div>
        <div class="d-flex justify-content-center mt-2">
          <a href="../signin.html" class="btn bg-gradient-primary w-85 mx-auto">
            <i class="material-symbols-rounded opacity-5 me-2">logout</i>
            <span class="nav-link-text">Sign Out</span>
          </a>
        </div>
      </ul>
    </div>
  </aside>

  <main class="main-content position-relative max-height-vh-100 h-100 border-radius-lg">
    <!-- Navbar -->
    <nav class="navbar navbar-main navbar-expand-lg position-sticky mt-2 top-1 px-0 py-1 mx-3 shadow-none border-radius-lg z-index-sticky" id="navbarBlur" data-scroll="true">
      <div class="container-fluid py-1 px-2">
        <nav aria-label="breadcrumb" class="ps-2">
          <ol class="breadcrumb bg-transparent mb-0 p-0">
            <li class="breadcrumb-item text-sm"><a class="opacity-5 text-dark" href="dashboard.html">Student</a></li>
            <li class="breadcrumb-item text-sm"><a class="opacity-5 text-dark" href="selfcare.html">Self-Care</a></li>
            <li class="breadcrumb-item text-sm text-dark active font-weight-bold" aria-current="page">Meditation</li>
          </ol>
        </nav>
      </div>
    </nav>

    <!-- Main Content -->
    <div class="container-fluid py-4">
      <!-- Header -->
      <div class="row mb-4">
        <div class="col-12">
          <h4 class="font-weight-bolder mb-1">üßò Meditation & Breathing</h4>
          <p class="text-muted">Take a moment to relax, breathe, and center yourself</p>
        </div>
      </div>

      <!-- Quick Start Section -->
      <div class="row mb-4">
        <div class="col-lg-8">
          <div class="card h-100">
            <div class="card-header pb-0">
              <h6>Guided Breathing Exercise</h6>
              <p class="text-sm text-muted">Follow the circle - inhale as it grows, exhale as it shrinks</p>
            </div>
            <div class="card-body text-center py-5">
              <div class="breathing-circle" id="breathingCircle">
                <span class="breathing-text" id="breathingText">Ready</span>
              </div>
              <div class="mt-4">
                <button class="btn bg-gradient-primary btn-lg px-5" id="startBreathing" onclick="toggleBreathing()">
                  <i class="material-symbols-rounded me-2">play_arrow</i>
                  Start Breathing
                </button>
              </div>
              <p class="text-sm text-muted mt-3" id="breathingInstruction">Click to begin the 4-7-8 breathing technique</p>
            </div>
          </div>
        </div>

        <div class="col-lg-4">
          <div class="card h-100">
            <div class="card-header pb-0">
              <h6>Session Timer</h6>
            </div>
            <div class="card-body text-center">
              <div class="timer-display" id="timerDisplay">05:00</div>
              <div class="d-flex justify-content-center gap-2 mt-3">
                <button class="btn btn-sm btn-outline-primary" onclick="setTimer(3)">3 min</button>
                <button class="btn btn-sm btn-outline-primary" onclick="setTimer(5)">5 min</button>
                <button class="btn btn-sm btn-outline-primary" onclick="setTimer(10)">10 min</button>
                <button class="btn btn-sm btn-outline-primary" onclick="setTimer(15)">15 min</button>
              </div>
              <button class="btn bg-gradient-success w-100 mt-3" onclick="toggleTimer()">
                <i class="material-symbols-rounded me-2" id="timerIcon">play_arrow</i>
                <span id="timerBtnText">Start Timer</span>
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Background Sounds -->
      <div class="row mb-4">
        <div class="col-12">
          <div class="card">
            <div class="card-header pb-0">
              <h6>Background Sounds</h6>
              <p class="text-sm text-muted">Choose a calming ambient sound</p>
            </div>
            <div class="card-body">
              <div class="row">
                <div class="col-lg-2 col-md-3 col-4 mb-3">
                  <div class="sound-option" onclick="selectSound(this, 'None')">
                    <div style="font-size: 32px;">üîá</div>
                    <div class="text-sm mt-2">Silence</div>
                  </div>
                </div>
                <div class="col-lg-2 col-md-3 col-4 mb-3">
                  <div class="sound-option selected" onclick="selectSound(this, 'Rain')">
                    <div style="font-size: 32px;">üåßÔ∏è</div>
                    <div class="text-sm mt-2">Rain</div>
                  </div>
                </div>
                <div class="col-lg-2 col-md-3 col-4 mb-3">
                  <div class="sound-option" onclick="selectSound(this, 'Ocean')">
                    <div style="font-size: 32px;">üåä</div>
                    <div class="text-sm mt-2">Ocean</div>
                  </div>
                </div>
                <div class="col-lg-2 col-md-3 col-4 mb-3">
                  <div class="sound-option" onclick="selectSound(this, 'Forest')">
                    <div style="font-size: 32px;">üå≤</div>
                    <div class="text-sm mt-2">Forest</div>
                  </div>
                </div>
                <div class="col-lg-2 col-md-3 col-4 mb-3">
                  <div class="sound-option" onclick="selectSound(this, 'Fire')">
                    <div style="font-size: 32px;">üî•</div>
                    <div class="text-sm mt-2">Fireplace</div>
                  </div>
                </div>
                <div class="col-lg-2 col-md-3 col-4 mb-3">
                  <div class="sound-option" onclick="selectSound(this, 'Birds')">
                    <div style="font-size: 32px;">üê¶</div>
                    <div class="text-sm mt-2">Birds</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Guided Meditations -->
      <div class="row mb-4">
        <div class="col-12">
          <h6 class="mb-3">Guided Meditations</h6>
        </div>
        <div class="col-lg-3 col-md-6 mb-3">
          <div class="card meditation-card" onclick="playMeditation('Morning Calm')">
            <div class="meditation-image" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
              <div class="play-btn">
                <i class="material-symbols-rounded">play_arrow</i>
              </div>
            </div>
            <div class="card-body">
              <h6 class="mb-1">Morning Calm</h6>
              <p class="text-sm text-muted mb-0">Start your day with peace</p>
              <span class="badge bg-light text-dark mt-2">5 min</span>
            </div>
          </div>
        </div>
        <div class="col-lg-3 col-md-6 mb-3">
          <div class="card meditation-card" onclick="playMeditation('Stress Relief')">
            <div class="meditation-image" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
              <div class="play-btn">
                <i class="material-symbols-rounded">play_arrow</i>
              </div>
            </div>
            <div class="card-body">
              <h6 class="mb-1">Stress Relief</h6>
              <p class="text-sm text-muted mb-0">Release tension and relax</p>
              <span class="badge bg-light text-dark mt-2">10 min</span>
            </div>
          </div>
        </div>
        <div class="col-lg-3 col-md-6 mb-3">
          <div class="card meditation-card" onclick="playMeditation('Focus & Study')">
            <div class="meditation-image" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
              <div class="play-btn">
                <i class="material-symbols-rounded">play_arrow</i>
              </div>
            </div>
            <div class="card-body">
              <h6 class="mb-1">Focus & Study</h6>
              <p class="text-sm text-muted mb-0">Improve concentration</p>
              <span class="badge bg-light text-dark mt-2">8 min</span>
            </div>
          </div>
        </div>
        <div class="col-lg-3 col-md-6 mb-3">
          <div class="card meditation-card" onclick="playMeditation('Sleep Well')">
            <div class="meditation-image" style="background: linear-gradient(135deg, #0c3483 0%, #a2b6df 100%);">
              <div class="play-btn">
                <i class="material-symbols-rounded">play_arrow</i>
              </div>
            </div>
            <div class="card-body">
              <h6 class="mb-1">Sleep Well</h6>
              <p class="text-sm text-muted mb-0">Peaceful sleep preparation</p>
              <span class="badge bg-light text-dark mt-2">15 min</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Stats -->
      <div class="row">
        <div class="col-lg-4 col-md-6 mb-3">
          <div class="card">
            <div class="card-body">
              <div class="row align-items-center">
                <div class="col-auto">
                  <div class="icon icon-lg icon-shape bg-gradient-primary shadow text-center border-radius-lg">
                    <i class="material-symbols-rounded opacity-10">timer</i>
                  </div>
                </div>
                <div class="col">
                  <h4 class="mb-0">45 min</h4>
                  <p class="text-sm text-muted mb-0">Total meditation time this week</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-4 col-md-6 mb-3">
          <div class="card">
            <div class="card-body">
              <div class="row align-items-center">
                <div class="col-auto">
                  <div class="icon icon-lg icon-shape bg-gradient-success shadow text-center border-radius-lg">
                    <i class="material-symbols-rounded opacity-10">calendar_month</i>
                  </div>
                </div>
                <div class="col">
                  <h4 class="mb-0">5 Days</h4>
                  <p class="text-sm text-muted mb-0">Current meditation streak</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-4 col-md-6 mb-3">
          <div class="card">
            <div class="card-body">
              <div class="row align-items-center">
                <div class="col-auto">
                  <div class="icon icon-lg icon-shape bg-gradient-info shadow text-center border-radius-lg">
                    <i class="material-symbols-rounded opacity-10">headphones</i>
                  </div>
                </div>
                <div class="col">
                  <h4 class="mb-0">12</h4>
                  <p class="text-sm text-muted mb-0">Sessions completed</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Core JS Files -->
  <script src="../assets/js/core/popper.min.js"></script>
  <script src="../assets/js/core/bootstrap.min.js"></script>
  <script src="../assets/js/material-dashboard.min.js"></script>
  
  <script>
    let isBreathing = false;
    let breathingInterval;
    let timerSeconds = 300; // 5 minutes
    let timerInterval;
    let isTimerRunning = false;

    function toggleBreathing() {
      isBreathing = !isBreathing;
      const btn = document.getElementById('startBreathing');
      const circle = document.getElementById('breathingCircle');
      const text = document.getElementById('breathingText');
      const instruction = document.getElementById('breathingInstruction');
      
      if (isBreathing) {
        btn.innerHTML = '<i class="material-symbols-rounded me-2">stop</i> Stop';
        instruction.textContent = 'Follow the rhythm: Inhale 4s, Hold 7s, Exhale 8s';
        startBreathingCycle();
      } else {
        btn.innerHTML = '<i class="material-symbols-rounded me-2">play_arrow</i> Start Breathing';
        instruction.textContent = 'Click to begin the 4-7-8 breathing technique';
        clearInterval(breathingInterval);
        circle.classList.remove('inhale', 'exhale');
        text.textContent = 'Ready';
      }
    }

    function startBreathingCycle() {
      const circle = document.getElementById('breathingCircle');
      const text = document.getElementById('breathingText');
      
      let phase = 0;
      const phases = [
        { name: 'Inhale...', duration: 4000, class: 'inhale' },
        { name: 'Hold...', duration: 7000, class: 'inhale' },
        { name: 'Exhale...', duration: 8000, class: 'exhale' }
      ];
      
      function nextPhase() {
        if (!isBreathing) return;
        
        const current = phases[phase];
        circle.className = 'breathing-circle ' + current.class;
        text.textContent = current.name;
        
        phase = (phase + 1) % phases.length;
        breathingInterval = setTimeout(nextPhase, current.duration);
      }
      
      nextPhase();
    }

    function setTimer(minutes) {
      timerSeconds = minutes * 60;
      updateTimerDisplay();
    }

    function updateTimerDisplay() {
      const mins = Math.floor(timerSeconds / 60);
      const secs = timerSeconds % 60;
      document.getElementById('timerDisplay').textContent = 
        String(mins).padStart(2, '0') + ':' + String(secs).padStart(2, '0');
    }

    function toggleTimer() {
      isTimerRunning = !isTimerRunning;
      const icon = document.getElementById('timerIcon');
      const btnText = document.getElementById('timerBtnText');
      
      if (isTimerRunning) {
        icon.textContent = 'pause';
        btnText.textContent = 'Pause Timer';
        timerInterval = setInterval(() => {
          if (timerSeconds > 0) {
            timerSeconds--;
            updateTimerDisplay();
          } else {
            clearInterval(timerInterval);
            isTimerRunning = false;
            icon.textContent = 'play_arrow';
            btnText.textContent = 'Start Timer';
            alert('üßò Meditation session complete! Great job taking time for yourself.');
          }
        }, 1000);
      } else {
        icon.textContent = 'play_arrow';
        btnText.textContent = 'Start Timer';
        clearInterval(timerInterval);
      }
    }

    function selectSound(element, sound) {
      document.querySelectorAll('.sound-option').forEach(opt => opt.classList.remove('selected'));
      element.classList.add('selected');
      
      if (sound !== 'None') {
        // Demo - would play actual sound in live app
        console.log('Playing: ' + sound);
      }
    }

    function playMeditation(name) {
      alert(`üßò Starting "${name}" meditation...\n\nThis is a demo. In the live app, the guided meditation audio would begin playing.`);
    }

    function showDemoAlert(feature) {
      alert('This is a demo. The "' + feature + '" feature would be fully functional in the live application.');
    }
  </script>
</body>
</html>
